# 힙(Heap)

- 최댓값 혹은 최속값을 빠르게 찾아내기 위한 이진 트리
- 최소힙의 경우 부모는 자식보다 작아야 하고, 최대힙의 경우 부모는 자식보다 커야 한다. 이 때 루트가 최솟값 혹은 최댓값이 된다.
- 최소힙: 요소의 삽입, 최솟값 확인, 최솟값 삭제의 기능 제공
  최대힙: 요소의 삽입, 최댓값 확인, 최댓값 삭제의 기능 제공
  최소 혹은 최대값이 아닌 값의 존재 여부 확인/요소 제거는 불가능
- 힙에 요소를 삽입할 때 (-)를 곱하여 삽입하는 방식으로 최대힙을 구현할 수 있으므로, 이후의 힙은 모두 최소힙을 나타내기로 한다.

## 삽입

- 일단 요소를 트리 상의 다음 공간에 추가하고, 힙의 성질을 만족하게끔 서로 자리를 바꾸는 방식으로 구현되므로 균형 트리임이 보장된다. ⇒ `O(logN)` 보장
- '트리 상의 다음 공간에 추가한다'란 높이가 작은 곳부터, 높이가 같다면 왼쪽부터 채워나간다는 뜻이다.

## **최솟값 확인**

- 루트에 적힌 요소 ⇒ `O(1)`

## **최솟값 삭제**

- 트리 구조 상에서 가장 마지막 위치의 노드와 최솟값의 위치를 바꾸고 제거. 부모가 자식보다 작다는 조건을 만족할 때 까지 부모와 자식의 자리를 바꾼다. ⇒ `O(logN)`

## 구현

- 트리의 각 요소를 배열에 대응시키면 구현이 간편하다.
  - 1-index
  - x의 왼쪽 자식: 2x
  - x의 오른쪽 자식: 2x+1
  - x의 부모: x/2

### 최소힙을 이용한 우선순위큐: [heapq](../../lib/heapq.js)

- `heapify(iter)`: iterable 을 heap으로 변환하여 반환한다
- `heappush(heap, item)`: heap에 요소를 삽입
- `heaptop(heap)`: heap의 최솟값 확인
- `heappop(heap)`: heap의 최솟값을 제거하고 반환한다

## FAQ

### Q. 힙에서 할 수 있는건 어차피 균형 이진 트리에서도 할 수 있지 않나요? 그러면 균형 이진 트리가 더 제공해주는 기능이 많은데 힙을 쓸 이유가 있나요?

A. 힙에서 할 수 있는걸 균형 이진 트리에서 할 수 있는 것이 맞고, 자가 균형 트리라는 가정하에 시간복잡도가 O(log N)_O_(_logN_)으로 동일한 것도 맞습니다. 그러나 힙은 균형 이진 트리보다 수행 속도도 빠르고, 구현도 쉽고, 공간도 적게 차지하기에 최소 혹은 최댓값의 확인/삭제만 필요할 때에는 힙을 쓰는 것이 더 좋습니다.

## 정리

- 삽입, 최솟값 삭제는 `O(logN`), 최솟값 확인은 `O(1)`. 해쉬, 이진 검색 트리와 달리 구조적으로 시간복잡도가 보장된다.
